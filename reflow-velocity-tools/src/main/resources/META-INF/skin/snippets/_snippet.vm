##
## Copyright 2012-2020 Christophe Friederich
##
## Licensed under the Apache License, Version 2.0 (the "License");
## you may not use this file except in compliance with the License.
## You may obtain a copy of the License at
##
##   http://www.apache.org/licenses/LICENSE-2.0
##
## Unless required by applicable law or agreed to in writing, software
## distributed under the License is distributed on an "AS IS" BASIS,
## WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
## See the License for the specific language governing permissions and
## limitations under the License.
##
#**
 * display information of snippet
 *#
#macro( debug $snippet $isRoot $indent )##
#*  *##if ( $snippet )##
#*      *##if( $isRoot )##
#*          *##set( $indent = 0 )##
<pre class="placeholder-debug text-left">
    <code>
#*      *##end##
#*      *##set( $space = $display.space($indent) )##
##
${space}#if( $indent > 0)- #{end}name: ${snippet.name}
#*      *##if( $isRoot)
${space}type: ${snippet.type}
#*      *##end##
##
#*      *##if( $indent > 0)##
#*          *##set( $indent2 = $indent + 2 )##
#*          *##set($space = $display.space($indent2) )##
#*      *##end##
##
#*  *##set( $html = "" )##
#*  *##if( $snippet.ownHtml )##
#*      *##set( $html = $esc.html( $htmlTool.normaliseWhitespace($snippet.ownHtml ) ) )##
#*  *##end##
#*  *##set( $attrs = "" )##
#*  *##if( $snippet.attrs )##
#*      *##set( $attrs = $esc.html( $htmlTool.normaliseWhitespace( $snippet.attrs.toString() ) ) )##
#*  *##end##
${space}attributes: $attrs
${space}isHtmlTag: ${snippet.isHtmlTag()}
${space}ownHtml: '$html'
${space}parent: $!snippet.parent.name
##
#*      *##if( !${snippet.children.isEmpty()} )##
##
${space}children:
##
#*          *##set( $indent = $indent + 4 )##
#*          *##foreach( $child in ${snippet.children} )##
#*              *##debug($child false $indent)##
#*          *##end##
#*          *##set( $indent = $indent - 4 )##
#*          *##set($space = $display.space($indent) )##
#*      *##end##
#*      *##if( $isRoot )##
    </code>
</pre>
#*      *##end##
#* *##end##
#end##
#**
 * render html snippet
 *#
#macro(render_html $snippet )##
#*  *##if( ${snippet} && ${snippet.html} )##
#*      *##evaluate( ${snippet.html} )##
#*  *##end##
#end
##
##
##
##
#if( $snippet.attrs["debug"])##
#*  *##debug( $snippet true 0)##
#end
#**
 * execute snippet
 *#
#parse("$snippetPath")##

